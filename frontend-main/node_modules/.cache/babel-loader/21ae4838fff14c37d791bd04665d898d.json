{"ast":null,"code":"var _jsxFileName = \"E:\\\\now\\\\MERN-Assignment-frontend-main\\\\src\\\\components\\\\post\\\\DeletePost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router';\nimport useToken from \"../userAccounts/useToken\";\nimport ErrorPage from \"../error/Error\";\nimport \"../article/Article.css\";\nimport Preloader from '../article/PreLoader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst DeletePost = () => {\n  _s();\n\n  const {\n    token\n  } = useToken();\n  const {\n    id\n  } = useParams();\n  const [postValues, setPostValues] = useState({\n    title: \"\",\n    description: \"\"\n  });\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetchAPI();\n  }, [id]);\n\n  async function fetchAPI() {\n    const response = await fetch(`/api/posts/${id}`, {\n      method: 'get',\n      headers: {\n        'Authorization': `Bearer ${token.token}`\n      }\n    });\n    const body = await response.json();\n    if (body !== {\n      status: \"Error\"\n    }) setPostValues({\n      title: body.title,\n      description: body.description\n    });\n    setLoading(false);\n  }\n\n  async function fetchPost() {\n    const response = await fetch(`/api/posts/${id}/delete`, {\n      method: 'post',\n      headers: {\n        'Authorization': `Bearer ${token.token}`\n      }\n    });\n    const body = await response.json();\n\n    if (body.status === \"Success\") {\n      alert(\"Post Deletion Successful.\");\n      navigate(\"/article-list\", {\n        replace: true\n      });\n    } else {\n      alert(\"Post Deletion Unsuccessful!\");\n    }\n  }\n\n  if (!postValues.title) return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Preloader, {\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(ErrorPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 50\n    }, this)]\n  }, void 0, true);\n  if (!token.admin) return /*#__PURE__*/_jsxDEV(ErrorPage, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 29\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"blogPost\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"addComment\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"commentHeading\",\n        children: \"Delete a Blog Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Title: \", postValues.title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Description: \", postValues.description]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchPost,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DeletePost, \"w7Iku3+5NnJ/1WlZVzSaOPKAtDQ=\", false, function () {\n  return [useToken, useParams, useNavigate];\n});\n\n_c = DeletePost;\nexport default DeletePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeletePost\");","map":{"version":3,"sources":["E:/now/MERN-Assignment-frontend-main/src/components/post/DeletePost.js"],"names":["React","useState","useEffect","useParams","useNavigate","useToken","ErrorPage","Preloader","DeletePost","token","id","postValues","setPostValues","title","description","loading","setLoading","navigate","fetchAPI","response","fetch","method","headers","body","json","status","fetchPost","alert","replace","admin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router';\nimport useToken from \"../userAccounts/useToken\";\nimport ErrorPage from \"../error/Error\";\nimport \"../article/Article.css\";\nimport Preloader from '../article/PreLoader';\n\nconst DeletePost = () => {\n    const { token } = useToken();\n    const { id } = useParams();\n    const [postValues, setPostValues] = useState({ title: \"\", description: \"\" });\n    const [loading, setLoading] = useState(true);\n    const navigate = useNavigate();\n    \n    \n    useEffect(() => {\n        fetchAPI();\n    }, [id]);\n\n    async function fetchAPI() {\n        const response = await fetch(`/api/posts/${id}`, {\n            method: 'get',\n            headers: {\n                'Authorization': `Bearer ${token.token}`\n            }\n        });\n        const body = await response.json();\n        if (body !== { status: \"Error\" })\n            setPostValues({ title: body.title, description: body.description });\n        setLoading(false);\n    }\n    \n    async function fetchPost() {\n        const response = await fetch(`/api/posts/${id}/delete`, {\n            method: 'post',\n            headers: {\n                'Authorization': `Bearer ${token.token}`\n            }\n        })\n        const body = await response.json();\n            \n        if (body.status === \"Success\") {\n            alert(\"Post Deletion Successful.\");\n            navigate(\"/article-list\", { replace: true });\n        } else {\n            alert(\"Post Deletion Unsuccessful!\");\n        }\n    }\n    if (!postValues.title) \n        return (<><Preloader loading={loading} /><ErrorPage /></>);\n    if(!token.admin) return <ErrorPage />\n    return (\n        <div className=\"blogPost\">\n            <div className=\"addComment\">\n                <h3 className='commentHeading'>Delete a Blog Post</h3>\n                <label>\n                    Title: {postValues.title}\n                </label>\n                <br></br>\n                <label>\n                    Description: {postValues.description}\n                </label>\n                <br></br>\n                <button onClick={fetchPost}>Delete</button>\n            </div>\n        </div>\n    );\n};\n\nexport default DeletePost;"]},"metadata":{},"sourceType":"module"}